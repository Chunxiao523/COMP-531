{"version":3,"sources":["webpack:///webpack/bootstrap 3af6ef06aa335567db8b","webpack:///./src/index.js","webpack:///./src/dummy.js"],"names":["window","onload","document","querySelector","onclick","value","url","resource","method","endpoint","payload","options","credentials","headers","body","JSON","stringify","fetch","then","r","status","get","indexOf","json","text","console","error","statusText","Error","updateHeadline","headline","box","response","innerHTML","toggle","log","login","username","password","user","headlines","catch","message","logout","show","toggleElement","el","id","style","display","_show","forEach"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 3af6ef06aa335567db8b\n **/","\r\nimport { login, logout, updateHeadline } from './dummy'\r\n\r\nwindow.onload = () => {\r\n\tdocument.querySelector(\"#login\").onclick = login\r\n\tdocument.querySelector(\"#logout\").onclick = logout\r\n\tdocument.querySelector(\"#headline\").onclick = () => {\r\n\t\tupdateHeadline(document.querySelector(\"#newHeadline\").value)\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","const url = 'https://webdev-dummy.herokuapp.com'\r\n\r\nconst resource = (method, endpoint, payload) => {\r\n  const options =  {\r\n    method,\r\n    credentials: 'include',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    }\r\n  }\r\n  if (payload) options.body = JSON.stringify(payload)\r\n\r\n  return fetch(`${url}/${endpoint}`, options)\r\n    .then(r => {\r\n      if (r.status === 200) {\r\n        return (r.headers.get('Content-Type').indexOf('json') > 0) ? r.json() : r.text()\r\n      } else {\r\n        // useful for debugging, but remove in production\r\n        console.error(`${method} ${endpoint} ${r.statusText}`)\r\n        throw new Error(r.statusText)\r\n      }\r\n    })\r\n}\r\n\r\nconst updateHeadline = (headline) => {\r\n  const box = document.querySelector(\"#message\")\r\n  return resource('PUT', 'headline', { headline })\r\n  .then((response) => {\r\n    box.innerHTML = `you are logged in as \"${response.headline}\"`\r\n      toggle(false)\r\n    console.log(`New headline ${response.headline}`)\r\n  })\r\n  \r\n}\r\n\r\nconst login = () => {\r\n  \r\n  const username = document.querySelector(\"#username\")\r\n  const password = document.querySelector(\"#password\")\r\n \r\n  const box = document.querySelector(\"#message\")\r\n  return resource('POST', 'login', { \r\n      username: username.value, \r\n      password: password.value \r\n    })\r\n    .then(r => resource('GET', 'headlines'))\r\n    .then(r => {\r\n      const user = r.headlines[0]\r\n      box.innerHTML = `you are logged in as ${user.username} \"${user.headline}\"`\r\n      toggle(false)\r\n    })\r\n    .catch(r => box.innerHTML = `\"${r.message || 'Error'}\" when logging in`)\r\n}\r\n\r\nconst logout = () => {\r\n  const box = document.querySelector(\"#message\")\r\n  return resource('PUT', 'logout')\r\n    .then(r => box.innerHTML = \"You have logged out\" )\r\n    .then(_ => toggle(true))\r\n    .catch(r => box.innerHTML = `\"${r.message}\" when logging out` )\r\n}\r\n\r\nconst toggle = (show) => {\r\n  const toggleElement = _show => id => {\r\n    const el = document.querySelector(id)\r\n    if (el) {\r\n      el.style.display = _show ? 'inline' : 'none'\r\n    }\r\n  }\r\n  ['#username', '#password', '#login'].forEach(toggleElement(show));\r\n  ['#logout', '#headline', '#newHeadline'].forEach(toggleElement(!show));\r\n}\r\n\r\n\r\n\r\nexport { url, login, logout, updateHeadline }\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/dummy.js\n **/"],"sourceRoot":""}